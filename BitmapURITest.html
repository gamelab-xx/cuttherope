<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>EaselJS Example: Text</title>

<link href="styles/styles.css" rel="stylesheet" type="text/css" />
<!--
    <script src="../lib/easel.js" type="text/javascript"></script>-->
<!-- Import EaselJS Framework -->
<script src="../src/easeljs/utils/UID.js"></script>
<script src="../src/easeljs/geom/Matrix2D.js"></script>
<script src="../src/easeljs/events/MouseEvent.js"></script>
<script src="../src/easeljs/display/DisplayObject.js"></script>
<script src="../src/easeljs/display/Container.js"></script>
<script src="../src/easeljs/display/Bitmap.js"></script>
<script src="../src/easeljs/display/Graphics.js"></script>
<script src="../src/easeljs/display/Shape.js"></script>
<script src="../src/easeljs/display/Stage.js"></script>
<script src="../src/easeljs/utils/Ticker.js"></script>
<script src="../src/easeljs/display/Text.js"></script>
    <script src="Star.js" type="text/javascript"></script>
    <script src="Vector2.js" type="text/javascript"></script>
    <script src="Bubble.js" type="text/javascript"></script>
    <script src="../src/easeljs/geom/Rectangle.js" type="text/javascript"></script>
<!-- End EaselJS Imports -->

<script>
var canvas;
var stage;
var bubble;
var star;
var backgroup;
var logo;
var smallBubble;
var speed;
var star;

var bmp;
var txt;
var count = 0;
var con;
var dx;
var dy;
var W;

var H;
var smallBubbleContainer = new Container();
function init() {

	//find canvas and load images, wait for last image to load
    canvas = document.getElementById("testCanvas");
    W = canvas.width;
    H = canvas.height;
	stage = new Stage(canvas);
	

	smallBubble = new Bitmap("img/loader-smallbubble.png");

	backgroup = new Bitmap("img/menubg.jpg");
	logo = new Bitmap("img/loader-logo.png");
	logo.x = 200;
	logo.y = 150;
	speed = new Vector2(5, 5);
    star=new Star(200,300,100)
	stage.addChild(backgroup);
	stage.addChild(logo);
	bubble = new Bubble(speed);
    
	stage.addChild(smallBubbleContainer);
	stage.addChild(bubble);
	stage.addChild(star);
	//addBubbles(1, 2);
	Ticker.addListener(window);

}
function addBubbles(count, speed) {

    for (var i = 0; i < count; i++) {
        var sBubble = smallBubble.clone();

        sBubble.x = 100;
        sBubble.y = 450;
        sBubble.alpha = Math.random() * 0.5 + 0.5;
        //sBubble.scaleX = sBubble.scaleY = Math.random() + 0.3;

        var a = Math.PI * 2 * Math.random();
        var v = (Math.random() ) * 30 * speed;
        sBubble.vX = Math.cos(a) * v;
        sBubble.vY = Math.sin(a) * v;
        sBubble.scaleX = sBubble.scaleY = 0.3;
        
        sBubble.vS = (Math.random() - 0.5) * 0.2; // scale
        sBubble.vA = -Math.random() * 0.05 - 0.01; // alpha

        // add to the display list:
        smallBubbleContainer.addChild(sBubble);
    }

}

function tick() {

    var l = smallBubbleContainer.getNumChildren();
 
    for (var i = l -1; i > 0; i--) {
        var sBubble = smallBubbleContainer.getChildAt(i);

        sBubble.vX *= 0.5;

        // update position, scale, and alpha:
        sBubble.x += sBubble.vX;
        sBubble.y += sBubble.vY;
        //sBubble.scaleX = sBubble.scaleX = sBubble.scaleX + sBubble.vS;
        sBubble.alpha += sBubble.vA;

        //remove sparkles that are off screen or not invisble
        if (sBubble.alpha <= 0 || sBubble.y > canvas.height) {
            smallBubbleContainer.removeChildAt(i);
        }
    }
    stage.update();
    addBubbles(3, 2);
}

</script>
</head>
	
<body onload="init();">
	<div class="description">
		Simple sample showing how to use image URIs with the <strong>Bitmap</strong> class.
	</div>
	<div class="canvasHolder">
		<canvas id="testCanvas" width="768"  height="432"></canvas>
	</div>
</body>
</html>
